class CreatePgSearchDocuments < ActiveRecord::Migration<%= migration_version %>
  def up
    say_with_time("Creating table for pg_search multisearch") do
      create_table :pg_search_documents, id: primary_key_type do |t|
        t.text :content
        t.belongs_to :searchable, polymorphic: true, index: true, type: primary_key_type
        t.timestamps null: false
      end
    end
  end

  def down
    say_with_time("Dropping table for pg_search multisearch") do
      drop_table :pg_search_documents
    end
  end

  private

  def primary_key_type
    config = Rails.configuration.generators
    config.options[config.orm][:primary_key_type] || :primary_key
  end
end
