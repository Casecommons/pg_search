{"id":"pg_search-031e","content_hash":"1eef3b676302539fd74d314cdf6bf03bd6af9157c1958db11545cdb840fec7e7","title":"Eliminate Arel.sql cop-outs with proper Arel constructs","description":"Replace remaining Arel.sql calls with proper Arel table references, column references, and SQL constructs. Current instances: rank_column references, order_within_rank, PostgreSQL cast expressions, empty string literals.","notes":"Successfully eliminated unnecessary Arel.sql calls:\n- Empty string literals now use Arel::Nodes::Quoted.new('')  \n- Default ordering uses proper Arel table references\n- Distinguished necessary Arel.sql (user input, subquery aliases, PostgreSQL casts) from unnecessary ones\n- All 95 tests passing\n\nRemaining Arel.sql calls are justified:\n- User-provided SQL expressions (config.order_within_rank, ranking expressions)\n- Dynamic subquery table aliases (#{rank_table_alias}.rank)\n- PostgreSQL-specific syntax (::text casts, tsearch functions)\n- Complex feature-specific SQL in TSearch/Trigram/DMetaphone","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-31T16:38:01.315548-05:00","updated_at":"2025-10-31T16:41:08.402088-05:00","closed_at":"2025-10-31T16:41:08.402088-05:00","dependencies":[{"issue_id":"pg_search-031e","depends_on_id":"pg_search-951c","type":"discovered-from","created_at":"2025-10-31T16:38:01.327906-05:00","created_by":"grant"}]}
{"id":"pg_search-4aea","content_hash":"70b9031843984f746fea251556009bc459167f1ed2c8d73fc8991a69769a3453","title":"Fix undercover coverage tool compatibility with jj","description":"The undercover coverage tool fails with 'Rugged::FilesystemError: file changed before we could read it' when using jj instead of git. Need to either configure undercover to work with jj or find alternative coverage checking approach.","status":"open","priority":1,"issue_type":"task","created_at":"2025-10-31T16:36:30.253929-05:00","updated_at":"2025-10-31T16:36:30.253929-05:00","dependencies":[{"issue_id":"pg_search-4aea","depends_on_id":"pg_search-951c","type":"discovered-from","created_at":"2025-10-31T16:36:30.255099-05:00","created_by":"grant"}]}
{"id":"pg_search-6e20","content_hash":"9ec80be156f780a3abafd480a73f69be3eb572c6f9d83e847d155af097eb102d","title":"Refactor subquery JOINs to use proper Arel constructs","description":"Replace manual JOIN string construction and table alias references with proper Arel subquery JOINs. Current areas: rank_join method, subquery table alias references in apply() and with_pg_search_rank methods.","status":"in_progress","priority":1,"issue_type":"task","created_at":"2025-10-31T16:42:00.922988-05:00","updated_at":"2025-10-31T16:42:03.616065-05:00","dependencies":[{"issue_id":"pg_search-6e20","depends_on_id":"pg_search-031e","type":"discovered-from","created_at":"2025-10-31T16:42:00.924312-05:00","created_by":"grant"}]}
{"id":"pg_search-951c","content_hash":"7e117d8357e6b233281249ddc3a9fcf4e167ab070591fdadcdad6bd249bf08bd","title":"replace SQL string interpolation with Arel calls","description":"","notes":"Core Arel conversion work complete in scope_options.rb and configuration/column.rb. Tests passing (95 examples, 0 failures). Main blocker: coverage check fails with Rugged::FilesystemError due to jj/git interaction. Need to resolve coverage tool compatibility or skip coverage check for this PR.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-31T16:18:54.494314-05:00","updated_at":"2025-10-31T16:37:21.554101-05:00","closed_at":"2025-10-31T16:37:21.554101-05:00"}
